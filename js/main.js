var h=null;window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.onload=function(){h=new k;window.requestAnimationFrame(l)};window.addEventListener("resize",function(){m(h)});function n(){this.y=this.x=0}function p(b,a,f){this.x=b;this.y=a;this.z=f}
function k(){this.b=[];var b=q,a={g:10};this.c=a.c||1E3;this.g=a.g||3;this.speed=a.speed||150;this.h=a.h||150;this.method=a.j||b;this.i=0;this.origin=new n;this.canvas=document.getElementById("main_canvas");this.f=this.canvas.getContext("2d");m(this);this.f.font="18px Arial";r(this);for(b=this.b.length=0;b<this.h;b++)this.b.push(new p(t(-this.canvas.width,this.canvas.width),t(-this.canvas.height,this.canvas.height),t(1,this.c)))}
function m(b){var a=window.innerWidth,f=window.innerHeight;b.canvas.width=a;b.canvas.height=f;b.canvas.style.width=a+"px";b.canvas.style.height=f+"px";b.a=b.f.getImageData(0,0,b.canvas.width,b.canvas.height);r(b)}function r(b){b.origin.x=b.canvas.width/2;b.origin.y=b.canvas.height/2}var q="rects";
function l(b){for(var a=h,f=.001*a.speed*(b-a.i),d=0;d<a.b.length;d++){var e=a.b[d];e.z-=f;0>=e.z&&(e.x=t(-a.canvas.width,a.canvas.width),e.y=t(-a.canvas.height,a.canvas.height),e.z=a.c)}if("rects"===a.method)for(a.f.fillStyle="rgb(255,255,255)",a.f.clearRect(0,0,a.canvas.width,a.canvas.height),f=0;f<a.b.length;f++){d=a.b[f];e=256/d.z;var c=(a.c-d.z)/a.c*a.g;a.f.fillRect(d.x*e+a.origin.x,d.y*e+a.origin.y,c,c)}else{d=a.a.data.length;f=4*a.a.width;for(c=0;c<d;c++)a.a.data[c]=0;for(d=0;d<a.b.length;d++){e=
a.b[d];var g=256/e.z;c=Math.floor(e.x*g+a.origin.x);g=Math.floor(e.y*g+a.origin.y);0<c&&c<a.canvas.width&&0<g&&g<a.canvas.height&&(c=g*f+4*c,a.a.data[c]=255,a.a.data[c+1]=255,a.a.data[c+2]=255,a.a.data[c+3]=(a.c-e.z)/a.c*255)}a.f.putImageData(a.a,0,0)}a.i=b;window.requestAnimationFrame(l)}function t(b,a){return b+Math.random()*(a-b)};
